@use '../variables'as *;
@use '../mixins'as *;

$drop-background-default      : $component-background-default;
$drop-background-default-dark : $component-background-default-dark;

$drop-color-default            : $component-color-default;
$drop-color-default-dark       : $component-color-default-dark;
$drop-nav-hover-background     : $component-background-shade;
$drop-nav-dark-hover-background: $component-background-shade-dark;
$drop-translate-y              : $component-margin;
$drop-transition-time          : $animation-duration-short;



@mixin drop {
    .#{$prefix}-drop-trigger {
        position: relative;
        display : inline-block;
    }

    .#{$prefix}-drop {
        position        : absolute;
        display         : block;
        z-index         : 1150;
        transform       : scale(0) translateX(-50%) translateY(100%);
        transform-origin: bottom left;
        bottom          : 0px;
        box-sizing      : border-box;
        height          : max-content;
        width           : max-content;
        left            : 50%;

        &.#{$prefix}-active {
            transform : scale(1) translateX(-50%) translateY(calc(100% + #{$drop-translate-y}));
        }

        &.#{$prefix}-drop-top-center {
            transform-origin: top left;
            top             : 0px;
            left            : 50%;
            transform       : scale(0) translateX(-50%) translateY(-100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(-50%) translateY(calc(-100% - #{$drop-translate-y}));
            }
        }

        &.#{$prefix}-drop-top-left {
            transform-origin: top left;
            top             : 0px;
            left            : 0px;
            transform       : scale(0) translateX(0%) translateY(-100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(0%) translateY(calc(-100% - #{$drop-translate-y}));
            }
        }

        &.#{$prefix}-drop-top-right {
            transform-origin: top left;
            top             : 0px;
            left            : 100%;
            transform       : scale(0) translateX(-100%) translateY(-100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(-100%) translateY(calc(-100% - #{$drop-translate-y}));
            }
        }

        &.#{$prefix}-drop-bottom-left {
            transform-origin: bottom left;
            bottom          : 0px;
            left            : 0px;
            transform       : scale(0) translateX(0%) translateY(100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(0%) translateY(calc(100% + #{$drop-translate-y}));
            }
        }

        &.#{$prefix}-drop-bottom-right {
            transform-origin: bottom left;
            bottom          : 0px;
            left            : 100%;
            transform       : scale(0) translateX(-100%) translateY(100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(-100%) translateY(calc(100% + #{$drop-translate-y}));
            }
        }

        &.#{$prefix}-drop-bottom-center {
            transform-origin: bottom left;
            bottom          : 0%;
            left            : 50%;
            transform       : scale(0) translateX(-50%) translateY(100%);

            &.#{$prefix}-active {
                transform: scale(1) translateX(-50%) translateY(calc(100% + #{$drop-translate-y}));
            }
        }
    }
}

@mixin dropdown {
    .#{$prefix}-dropdown {
        background-color: $drop-background-default;
        color           : $drop-color-default;
        border          : 1px solid transparent;
        border-radius   : $border-radius-default;
        box-sizing      : border-box;
        box-shadow      : $shadow2;

    }
}

@mixin drop-nav {
    ul.#{$prefix}-drop-nav {
        list-style: none;
        margin    : 0;
        padding   : 0;
        min-width : 200px;
        color     : $drop-color-default;
        box-sizing: border-box;
        z-index   : 10;

        li {
            margin       : 0;
            padding      : 0;
            box-sizing   : border-box;
            display      : block;
            // overflow  : hidden;

            a {
                @include component-padding;
                text-decoration : none;
                color           : inherit;
                display         : block;
                background-color: transparent;

                &.#{$prefix}-icon {
                    display                         : flex;
                    justify-content                 : flex-start;
                    @include component-padding($size: small, $same: true);
                }

                &:hover {
                    background-color: $drop-nav-hover-background;
                    outline         : none !important;
                }

                &:active {
                    outline: none !important;
                }
            }

            &.#{$prefix}-parent {
                @include component-padding;
                cursor     : default;
                font-weight: $text-weight-bold;
            }
        }
    }
}

@mixin drop-nav-dark {
    .#{$prefix}-dark {

        ul.#{$prefix}-drop-nav {
            color: $drop-color-default-dark;

            li {
                a {
                    &:hover {
                        background-color: $drop-nav-dark-hover-background;
                    }
                }
            }
        }
    }
}

@mixin dropdown-dark {
    .#{$prefix}-dark {
        .#{$prefix}-dropdown {
            background-color: $drop-background-default-dark;
            color           : $drop-color-default-dark;
        }


    }
}

@mixin dropdown-print {
    .#{$prefix}-print {
        .#{$prefix}-dropdown {
            background-color: $component-print-background;
            color           : $component-print-color;
            border          : $component-print-border;
            box-shadow      : $component-print-shadow;
        }
    }
}

@mixin drop-no-transition {
    body:not(.#{$prefix}-no-transitions) {
        .#{$prefix}-drop-trigger {

            &:hover,
            &:focus-within {
                .#{$prefix}-drop-hover {
                    transition: transform $drop-transition-time ease-in;
                }
            }
        }

        .#{$prefix}-drop {
            &.#{$prefix}-active {
                transition: transform $drop-transition-time ease-in;
            }
        }
    }
}

@mixin drop-hover {
    .#{$prefix}-drop-trigger {

        &:hover,
        &:focus-within {
            .#{$prefix}-drop-hover {
                transform : scale(1) translateX(-50%) translateY(calc(100% + #{$drop-translate-y}));

                &.#{$prefix}-drop-top-center {
                    transform: scale(1) translateX(-50%) translateY(calc(-100% - #{$drop-translate-y}));
                }

                &.#{$prefix}-drop-top-left {
                    transform: scale(1) translateX(0%) translateY(calc(-100% - #{$drop-translate-y}));

                }

                &.#{$prefix}-drop-top-right {
                    transform: scale(1) translateX(-100%) translateY(calc(-100% - #{$drop-translate-y}));
                }

                &.#{$prefix}-drop-bottom-left {
                    transform: scale(1) translateX(0%) translateY(calc(100% + #{$drop-translate-y}));

                }

                &.#{$prefix}-drop-bottom-right {
                    transform: scale(1) translateX(-100%) translateY(calc(100% + #{$drop-translate-y}));

                }

                &.#{$prefix}-drop-bottom-center {
                    transform: scale(1) translateX(-50%) translateY(calc(100% + #{$drop-translate-y}));
                }
            }
        }
    }
}

@mixin definitions {
    @include drop();
    @include drop-no-transition();
    @include dropdown();
    @include dropdown-dark();
    @include dropdown-print();
    @include drop-nav();
    @include drop-nav-dark();
    @include drop-hover();
}